@* @model IEnumerable<WebQuanLyNhaKhoa.DTO.ListOfEachUserDTO>

@{
    Layout = "~/Views/Shared/_LayoutCustomer.cshtml";
}
<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from skyethemes.com/html/2022/medicoz/services.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jun 2024 09:36:40 GMT -->
<head>
    <meta charset="utf-8">
    <title>Medicoz | Health and Medical HTML Template | Services</title>

    <!-- Stylesheets -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="~/css/bootstrap.css" rel="stylesheet">
    <link href="~/css/style.css" rel="stylesheet">
    <link href="~/css/responsive.css" rel="stylesheet">
    <link href="~/css/table.css" rel="stylesheet">
    <link href="~/css/reciept.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <!--Color Themes-->
    <link id="theme-color-file" href="~/css/color-themes/scarlet.css" rel="stylesheet">

    <script src="~/js/table.js"></script>

    <link rel="shortcut icon" href="~/images/favicon.png" type="image/x-icon">
    <link rel="icon" href="~/images/favicon.png" type="image/x-icon">

    <!-- Responsive -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]-->
    <!--[if lt IE 9]><script src="js/respond.js"></script><![endif]-->
</head>
<style>
    .search-box {
        width: 100%; /* Adjust width as per your design */
        max-width: 400px; /* Optional: to set a maximum width */
        padding: 12px 20px; /* Add padding to make the box more spacious */
        font-size: 16px; /* Font size for better readability */
        border-radius: 25px; /* Rounded corners for a softer look */
        border: 1px solid #ccc; /* Light border */
        outline: none; /* Remove the default outline */
        transition: border 0.3s ease, box-shadow 0.3s ease; /* Smooth transitions */
    }

        .search-box:focus {
            border-color: #007BFF; /* Highlight border color on focus */
            box-shadow: 0 0 8px rgba(0, 123, 255, 0.5); /* Subtle shadow for focus effect */
        }

        .search-box::placeholder {
            color: #999; /* Lighter placeholder text */
            font-style: italic; /* Optional: add italic for placeholder text */
        }
</style>
<body>

    <div class="page-wrapper">

        <!-- Preloader -->
        <div class="preloader"></div>

        <!--Page Title-->
        <section class="page-title" style="background-image: url('@Url.Content("~/images/background/8.jpg")');">
            <div class="auto-container">
                <div class="title-outer">
                    <h1>Lịch sử khám bệnh</h1>
                    <ul class="page-breadcrumb">
                        <li><a href="~/Home/Index">Trang chủ</a></li>
                        <li>Lich sử</li>
                    </ul>
                </div>
            </div>
        </section>
        <!--End Page Title-->

        <hr>

        <section>

    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <!-- Search form that submits the query to the server -->
                <input class="search-box" type="text" id="invoice-search" placeholder="Tìm kiếm Hóa đơn (SĐT)" />
                <div id="loading" style="display:none;">Đang tải...</div>
                <div id="no-data-message" style="display:none;">Không có dữ liệu</div>

            </div>
        </div>
        <br>

    </div>

    <br>



    @foreach (var chiTiet in Model)
    {
        <div class="container bootstrap snippets bootdeys" id="invoice-container-@chiTiet.IdhoaDon" style="display: none;">
            <div id="no-data-message" style="display: none; text-align: center; color: red;">
                <h3>Không tìm thấy kết quả</h3>
            </div>
            <br>
            <br>
            <!-- The rest of the HTML structure for displaying invoice details -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-default invoice" id="invoice">
                        <div class="panel-body">
                            <div class="invoice-ribbon">
                                <div class="ribbon-inner">PAID</div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 top-left">
                                    <div class="logo">
                                        <a href="~/Home/Index"><img src="~/images/logo-6.png" alt="" title=""></a>
                                    </div>
                                </div>

                                <div class="col-sm-6 top-right">
                                    <h3 class="marginright">HÓA ĐƠN-@chiTiet.IdhoaDon</h3>
                                    <span class="marginright">@DateTime.Now.ToString("dd/MM/yyyy")</span>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-xs-4 from">
                                    <p class="lead marginbottom">Từ: Nha khoa Hoàn Mĩ</p>
                                    <p>10/80c Song Hành Xa Lộ Hà Nội</p>
                                    <p>Tòa E2, Q.12</p>
                                    <p>Hồ Chí Minh, 700000</p>
                                    <p>SĐT: +(84) 347 123 534</p>
                                    <p>Email: nhakhoahoanmy@gmail.com</p>
                                </div>

                                <div class="col-xs-4 to">
                                    <p class="lead marginbottom">Đến: @chiTiet.EmailBn</p>
                                    <p>Phương thức thanh toán: @chiTiet.PhuongThucThanhToan</p>
                                    <p>Số điện thoại: @chiTiet.Sdt</p>

                                    @* <p>Tiền thuốc: @chiTiet.TienThuoc</p>
                                <p>Tiền điều trị: @chiTiet.TienDieuTri</p>
                                <p>Tổng tiền: @chiTiet.TongTien</p>
                                <p>Ngày lập: @Model.NgayLap.ToString("dd/MM/yyyy")</p> 
                                </div>
                                @if (Model != null && Model.Any())
                                {

                                    var item = Model.First();

                                    <div class="col-xs-4 text-right payment-details">
                                        <p class="lead marginbottom payment-info">Chi tiết thanh toán</p>
                                        <span class="marginright">@DateTime.Now.ToString("dd/MM/yyyy")</span>
                                        @* <p>VAT: DK888-777 </p> 
                                        <p>Tổng tiền:  @(item.TongTien.HasValue ? string.Format("{0:C}", item.TienThuoc.Value) : "N/A")</p>
                                        <p>Email khách hàng: @item.EmailBn</p>
                                    </div>

                                }
                            </div>

                            <div class="row table-row">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th class="text-center" style="width:5%">#</th>
                                            <th style="width:30%">Tên Dịch Vụ</th>
                                            <th class="text-right" style="width:20%">Phương Thức Thanh Toán</th>
                                            <th class="text-right" style="width:15%">Tiền Thuốc</th>
                                            <th class="text-right" style="width:15%">Tiền Điều Trị</th>
                                            <th class="text-right" style="width:15%">Tổng Tiền</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model != null && Model.Any())
                                        {
                                            int index = 1;
                                            foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td class="text-center">@index</td>
                                                    <td>@item.TenDon</td>
                                                    <td class="text-right">@item.PhuongThucThanhToan</td>
                                                    <td class="text-right"> @(item.TienThuoc.HasValue ? string.Format("{0:C}", item.TienThuoc.Value) : "N/A")</td>
                                                    <td class="text-right"> @(item.TienDieuTri.HasValue ? string.Format("{0:C}", item.TienThuoc.Value) : "N/A")</td>
                                                    <td class="text-right"> @(item.TongTien.HasValue ? string.Format("{0:C}", item.TienThuoc.Value) : "N/A")</td>

                                                </tr>
                                                index++;
                                            }
                                        }
                                        else
                                        {
                                            <tr>
                                                <td colspan="6" class="text-center">No data available</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>
    }


    </section>


    <script>
        $(document).ready(function () {
            // Debounce timeout for search input
            let timeout;

            // Search input handler
            $('#invoice-search').on('keyup', function () {
                const searchTerm = $(this).val().trim(); // Get and trim input value
                clearTimeout(timeout); // Clear previous timeout to avoid spamming

                $('#loading').show(); // Show loading indicator
                $('#no-data-message-global').hide(); // Hide "No Results" by default

                timeout = setTimeout(function () {
                    let foundAny = false; // Tracks if we find any matching invoice

                    // Loop through all invoices
                    $('[id^="invoice-container-"]').each(function () {
                        const phoneText = $(this).find('.to p:nth-child(3)').text().trim(); // Extract SĐT
                        const phoneNumber = phoneText.replace('Số điện thoại: ', '').trim(); // Clean phone number

                        // Match search term
                        if (phoneNumber === searchTerm) {
                            $(this).show(); // Show matching invoice
                            foundAny = true; // Mark as found
                        } else {
                            $(this).hide(); // Hide non-matching invoice
                        }
                    });

                    // Show "No Results" if nothing matches
                    if (!foundAny) {
                        $('#no-data-message-global').show();
                    }

                    $('#loading').hide(); // Hide loading indicator
                }, 500); // Debounce: Wait 500ms after user stops typing
            });
        });
    </script>






</body>
</html>
 *@